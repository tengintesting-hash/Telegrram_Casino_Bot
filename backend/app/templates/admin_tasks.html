<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Tasks</title>
</head>
<body>
  <h1>Tasks</h1>
  <a href="/admin?password={{ password }}">Back</a>
  <h2>Create Task</h2>
  <form method="post">
    <input type="hidden" name="password" value="{{ password }}" />
    <div>
      <label>Title <input name="title" required></label>
    </div>
    <div>
      <label>Description <input name="description"></label>
    </div>
    <div>
      <label>Task Type
        <select name="task_type">
          <option value="registration">Registration</option>
          <option value="deposit">Deposit</option>
        </select>
      </label>
    </div>
    <div>
      <label>Rarity
        <select name="rarity">
          <option>Normal</option>
          <option>Limited</option>
        </select>
      </label>
    </div>
    <div>
      <label>Reward Tokens <input name="reward_tokens" type="number" value="15000"></label>
    </div>
    <button type="submit">Create</button>
  </form>

  <h2>Existing Tasks</h2>
  <ul>
    {% for task in tasks %}
      <li>
        <form method="post" action="/admin/tasks/{{ task.id }}/update">
          <input type="hidden" name="password" value="{{ password }}" />
          <input name="title" value="{{ task.title }}" />
          <input name="description" value="{{ task.description }}" />
          <select name="task_type">
            <option value="registration" {% if task.task_type == 'registration' %}selected{% endif %}>Registration</option>
            <option value="deposit" {% if task.task_type == 'deposit' %}selected{% endif %}>Deposit</option>
          </select>
          <select name="rarity">
            <option {% if task.rarity == 'Normal' %}selected{% endif %}>Normal</option>
            <option {% if task.rarity == 'Limited' %}selected{% endif %}>Limited</option>
          </select>
          <input name="reward_tokens" type="number" value="{{ task.reward_tokens }}" />
          <button type="submit">Update</button>
        </form>
        <form method="post" action="/admin/tasks/{{ task.id }}/toggle" style="display:inline;">
          <input type="hidden" name="password" value="{{ password }}" />
          <button type="submit">{{ 'Disable' if task.is_active else 'Enable' }}</button>
        </form>
        <form method="post" action="/admin/tasks/{{ task.id }}/delete" style="display:inline;">
          <input type="hidden" name="password" value="{{ password }}" />
          <button type="submit">Delete</button>
        </form>
      </li>
    {% endfor %}
  </ul>
</body>
</html>
